{"mappings":"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","sources":["src/browser.tsx","src/components/DocsGPTWidget.tsx","src/requests/streamingApi.ts","src/assets/like.svg","src/assets/dislike.svg","src/components/SearchBar.tsx","src/requests/searchAPI.ts","src/utils/helper.ts"],"sourcesContent":["//exports browser ready methods\n\nimport { createRoot } from \"react-dom/client\";\n\nimport { DocsGPTWidget } from './components/DocsGPTWidget';\nimport { SearchBar } from './components/SearchBar';\nimport React from \"react\";\nif (typeof window !== 'undefined') {\n  const renderWidget = (elementId: string, props = {}) => {\n    const root = createRoot(document.getElementById(elementId) as HTMLElement);\n    root.render(<DocsGPTWidget {...props} />);\n  };\n  const renderSearchBar = (elementId: string, props = {}) => {\n    const root = createRoot(document.getElementById(elementId) as HTMLElement);\n    root.render(<SearchBar {...props} />);\n  };\n  (window as any).renderDocsGPTWidget = renderWidget;\n\n  (window as any).renderSearchBar = renderSearchBar;\n}\n\nexport { DocsGPTWidget, SearchBar };\n","\"use client\";\nimport React, { useRef, useState, useEffect } from 'react'\nimport DOMPurify from 'dompurify';\nimport styled, { keyframes, css } from 'styled-components';\nimport { PaperPlaneIcon, RocketIcon, ExclamationTriangleIcon, Cross2Icon } from '@radix-ui/react-icons';\nimport { FEEDBACK, MESSAGE_TYPE, Query, Status, WidgetCoreProps, WidgetProps } from '../types/index';\nimport { fetchAnswerStreaming, sendFeedback } from '../requests/streamingApi';\nimport { ThemeProvider } from 'styled-components';\nimport Like from '../assets/like.svg';\nimport Dislike from '../assets/dislike.svg';\nimport MarkdownIt from 'markdown-it';\n\nconst themes = {\n  dark: {\n    bg: '#222327',\n    text: '#fff',\n    primary: {\n      text: \"#FAFAFA\",\n      bg: '#222327'\n    },\n    secondary: {\n      text: \"#A1A1AA\",\n      bg: \"#38383b\"\n    }\n  },\n  light: {\n    bg: '#fff',\n    text: '#000',\n    primary: {\n      text: \"#222327\",\n      bg: \"#fff\"\n    },\n    secondary: {\n      text: \"#A1A1AA\",\n      bg: \"#F6F6F6\"\n    }\n  }\n};\n\nconst sizesConfig = {\n  small: { size: 'small', width: '320px', height: '400px' },\n  medium: { size: 'medium', width: '400px', height: '80vh' },\n  large: { size: 'large', width: '666px', height: '75vh' },\n  getCustom: (custom: { width: string; height: string; maxWidth?: string; maxHeight?: string }) => ({\n    size: 'custom',\n    width: custom.width,\n    height: custom.height,\n    maxWidth: custom.maxWidth || '968px',\n    maxHeight: custom.maxHeight || '70vh',\n  }),\n};\nconst createBox = keyframes`\n   0% {\n        transform: scale(0.6);\n      }\n      90% {\n        transform: scale(1.02);\n      }\n      100% {\n        transform: scale(1);\n      }\n`\nconst closeBox = keyframes`\n  0% {\n        transform: scale(1); \n      }\n      10% {\n        transform: scale(1.02); \n      }\n      100% {\n        transform: scale(0.6);\n      }\n`\n\nconst openContainer = keyframes`\n      0% {\n        width: 200px;\n        height: 100px;\n      }\n      100% {\n        width: ${(props) => props.theme.dimensions.width};\n        height: ${(props) => props.theme.dimensions.height};\n        border-radius: 12px;\n      }`\nconst closeContainer = keyframes`\n  0% {\n        width: ${(props) => props.theme.dimensions.width};\n        height: ${(props) => props.theme.dimensions.height};\n        border-radius: 12px;\n      }\n      100% {\n        width: 200px;\n        height: 100px;\n      }\n`\nconst fadeIn = keyframes`\n  from {\n        opacity: 0;\n        width: ${(props) => props.theme.dimensions.width};\n        height: ${(props) => props.theme.dimensions.height};\n        transform: scale(0.9);\n      }\n      to {\n        opacity: 1;\n        transform: scale(1);\n        width: ${(props) => props.theme.dimensions.width};\n        height: ${(props) => props.theme.dimensions.height};\n      }\n`\n\nconst fadeOut = keyframes`\n  from {\n        opacity: 1;\n        width: ${(props) => props.theme.dimensions.width};\n        height: ${(props) => props.theme.dimensions.height};\n      }\n      to {\n        opacity: 0;\n        transform: scale(0.9);\n        width: ${(props) => props.theme.dimensions.width};\n        height: ${(props) => props.theme.dimensions.height};\n      }\n`\nconst scaleAnimation = keyframes`\n  from {\n      transform: scale(1.2);\n      }\n      to {\n      transform: scale(1);\n      }\n`\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n  transition: opacity 0.5s;\n`\n\n\nconst WidgetContainer = styled.div<{ modal?: boolean, isOpen?: boolean }>`\n    all: initial;\n    position: fixed;\n    right: ${props => props.modal ? '50%' : '10px'};\n    bottom: ${props => props.modal ? '50%' : '10px'};\n    z-index: 1001;\n    transform-origin:100% 100%;\n    display: block;\n    &.modal{\n      transform : translate(50%,50%);\n    }\n    &.open {\n        animation: css ${createBox} 250ms cubic-bezier(0.25, 0.1, 0.25, 1) forwards;\n    }\n    &.close {\n      animation: css ${closeBox} 250ms cubic-bezier(0.25, 0.1, 0.25, 1) forwards;\n    }\n    align-items: center;\n    text-align: left;\n`;\n\nconst StyledContainer = styled.div<{ isOpen: boolean }>`\n    all: initial;\n    max-height: ${(props) => props.theme.dimensions.maxHeight};\n    max-width: ${(props) => props.theme.dimensions.maxWidth};\n    width: ${(props) => props.theme.dimensions.width};\n    height: ${(props) => props.theme.dimensions.height} ;\n    position: relative;\n    flex-direction: column;\n    justify-content: space-between;\n    bottom: 0;\n    left: 0;\n    background-color: ${(props) => props.theme.primary.bg};\n    font-family: sans-serif;\n    display: flex;\n    border-radius: 12px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.1);\n    padding: 26px 26px 0px 26px;\n    animation: ${({ isOpen, theme }) =>\n    theme.dimensions.size === 'large'\n      ? isOpen\n        ? css`${fadeIn} 150ms ease-in forwards`\n        : css` ${fadeOut} 150ms ease-in forwards`\n      : isOpen\n        ? css`${openContainer} 150ms ease-in forwards`\n        : css`${closeContainer} 250ms ease-in forwards`};\n    @media only screen and (max-width: 768px) {\n      max-height: 100vh;\n      max-width: 80vw;\n      overflow: auto;\n    }\n`;\n\nconst FloatingButton = styled.div<{ bgcolor: string, hidden: boolean, isAnimatingButton: boolean }>`\n    position: fixed;\n    display: ${props => props.hidden ? \"none\" : \"flex\"};\n    z-index: 500;\n    justify-content: center;\n    gap: 8px;\n    padding: 14px;\n    align-items: center;\n    bottom: 16px;\n    color: white;\n    font-family: sans-serif;\n    right: 16px;\n    font-weight: 500;\n    border-radius: 9999px;\n    background: ${props => props.bgcolor};\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    animation: ${props => props.isAnimatingButton ? css`${scaleAnimation} 200ms forwards` : 'none'};\n    &:hover {\n      transform: scale(1.1);\n      transition: transform 0.2s ease-in-out;\n    }\n    &:not(:hover) {\n      transition: transform 0.2s ease-in-out;\n    }\n`;\nconst CancelButton = styled.button`\n    cursor: pointer;\n    position: absolute;\n    top: 0;\n    right: 0;\n    margin: 8px;\n    width: 30px;\n    padding: 0;\n    background-color: transparent;\n    border: none;\n    outline: none;\n    color: inherit;\n    transition: opacity 0.3s ease;\n    opacity: 0.6;\n    &:hover {\n        opacity: 1;\n    }\n    .white-filter {\n        filter: invert(100%);\n    }\n`;\n\nconst Header = styled.div`\n    display: flex;\n    align-items: flex-start;\n`;\n\nconst ContentWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    gap:2px; \n    margin-left: 8px;\n`;\n\nconst Title = styled.h3`\n    font-size: 14px;\n    font-weight: normal;\n    color: ${props => props.theme.primary.text};\n    margin: 0;\n`;\n\nconst Description = styled.p`\n    font-size: 13.75px;\n    color: ${props => props.theme.secondary.text};\n    margin: 0 ;\n    padding: 0 ;\n`;\n\nconst Conversation = styled.div`\n  height: 70%;\n  border-radius: 6px;\n  text-align: left;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: ${props => props.theme.secondary.bg} transparent; /* thumb color track color */\n`;\nconst Feedback = styled.div`\n  background-color: transparent;\n  font-weight: normal;\n  gap: 12px;\n  display: flex;\n  padding: 6px;\n  clear: both;\n`;\nconst MessageBubble = styled.div<{ type: MESSAGE_TYPE }>`\n    display: block;\n    font-size: 16px;\n    position: relative;\n    width: 100%;;\n    float: right;\n    margin: 0px;\n    &:hover ${Feedback} * {\n    visibility: visible ;\n  }\n`;\nconst Message = styled.div<{ type: MESSAGE_TYPE }>`\n    background: ${props => props.type === 'QUESTION' ?\n    'linear-gradient(to bottom right, #8860DB, #6D42C5)' :\n    props.theme.secondary.bg};\n    color: ${props => props.type === 'ANSWER' ? props.theme.primary.text : '#fff'};\n    border: none;\n    float: ${props => props.type === 'QUESTION' ? 'right' : 'left'};\n    max-width: ${props => props.type === 'ANSWER' ? '100%' : '80'};\n    overflow: auto;\n    margin: 4px;\n    display: block;\n    line-height: 1.5;\n    padding: 12px;\n    border-radius: 6px;\n`;\nconst Markdown = styled.div`\n pre {\n      padding: 8px;\n      width: 90%;\n      font-size: 12px;\n      border-radius: 6px;\n      overflow-x: auto;\n      background-color: #1B1C1F;\n      color: #fff ;\n    }\n\n    h1 {\n      font-size: 16px;\n    }\n\n    h2 {\n      font-size: 14px;\n    }\n\n    h3 {\n      font-size: 14px;\n    }\n\n    p {\n      margin: 0px;\n    }\n\n    code:not(pre code) {\n      border-radius: 6px;\n      padding: 1px 3px;\n      font-size: 12px;\n      display: inline-block;\n      background-color: #646464;\n      color: #fff ;\n    }\n\n    code {\n      white-space: pre-wrap ;\n      overflow-wrap: break-word;\n      word-break: break-all;\n    }\n\n    ul{\n      padding:0px;\n      list-style-position: inside;\n    }\n`\nconst ErrorAlert = styled.div`\n  color: #b91c1c;\n  border:0.1px solid #b91c1c;\n  display: flex;\n  padding:4px;\n  margin:11.2px;\n  opacity: 90%;\n  max-width: 70%;\n  font-weight: 400;\n  border-radius: 6px;\n  justify-content: space-evenly;\n`\n//dot loading animation\nconst dotBounce = keyframes`\n  0%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-5px);\n  }\n`;\n\nconst DotAnimation = styled.div`\n  display: inline-block;\n  animation: ${dotBounce} 1s infinite ease-in-out;\n`;\n// delay classes as styled components\nconst Delay = styled(DotAnimation) <{ delay: number }>`\n  animation-delay: ${props => props.delay + 'ms'};\n`;\nconst PromptContainer = styled.form`\n  background-color: transparent;\n  height: ${props => props.theme.dimensions.size == 'large' ? '60px' : '40px'};\n  display: flex;\n  justify-content: space-evenly;\n`;\nconst StyledInput = styled.input`\n  width: 100%;\n  border: 1px solid #686877;\n  padding-left: 12px;\n  background-color: transparent;\n  font-size: 16px;\n  border-radius: 6px;\n  color: ${props => props.theme.text};\n  outline: none;\n`;\nconst StyledButton = styled.button`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-image: linear-gradient(to bottom right, #5AF0EC, #E80D9D);\n  background-color: rgba(0, 0, 0, 0.3);\n  border-radius: 6px;\n  min-width: ${props => props.theme.dimensions.size === 'large' ? '60px' : '40px'};\n  height: ${props => props.theme.dimensions.size === 'large' ? '60px' : '40px'};\n  margin-left:8px;\n  padding: 0px;\n  \n  border: none;\n  cursor: pointer;\n  outline: none;\n  &:hover{\n    opacity: 90%;\n  }\n  &:disabled {\n    background-image: linear-gradient(to bottom right, #2d938f, #b31877);\n  }`;\nconst HeroContainer = styled.div`\n  position: relative;\n  width: 90%;\n  max-width: 500px;\n  background-image: linear-gradient(to bottom right, #5AF0EC, #ff1bf4);\n  border-radius: 10px;\n  margin: 16px auto;\n  padding: 2px;\n`;\nconst HeroWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  gap: 8px;\n  align-items: middle;\n  background-color: ${props => props.theme.primary.bg};\n  border-radius: 10px; \n  font-weight: normal;\n  padding: 12px;\n`\nconst HeroTitle = styled.h3`\n  color: ${props => props.theme.text};\n  font-size: 16px;\n  margin:0px ;\n  padding: 0px;\n`;\nconst HeroDescription = styled.p`\n  color: ${props => props.theme.text};\n  font-size: 12px;\n  line-height: 1.5;\n  margin: 0px;\n  padding: 0px;\n`;\nconst Hyperlink = styled.a`\n  color: #9971EC;\n  text-decoration: none;\n`;\nconst Tagline = styled.div`\n  text-align: center;\n  display: block;\n  color: ${props => props.theme.secondary.text};\n  padding: 12px ;\n  font-size: 12px;\n`;\n\n\nconst SourcesList = styled.div`\n  display: flex;\n  margin:12px 0px;\n  flex-wrap: wrap;\n  gap: 8px;\n`;\n\nconst SourceLink = styled.a`\n  color: ${props => props.theme.primary.text};\n  text-decoration: none;\n  background: ${props => props.theme.secondary.bg};\n  padding: 4px 12px;\n  border-radius: 85px;\n  font-size: 14px;\n  transition: opacity 0.2s ease;\n  display: inline-block;\n  text-align: center;\n  max-width: 25%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.5;\n  \n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst ExtraButton = styled.button`\n  color: #9971EC;\n  background: transparent;\n  border-radius: 85px;\n  padding: 4px 12px;\n  font-size: 14px;\n  border: none;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n  text-align: center;\n  height:auto;\n  &:hover {\n    opacity: 0.8;\n  }\n`;\nconst SourcesComponent = ({ sources }: { sources: Array<{ source: string; title: string }> }) => {\n  const [showAll, setShowAll] = React.useState(false);\n  const visibleSources = showAll ? sources : sources.slice(0, 3);\n  const extraCount = sources.length - 3;\n  \n  return (\n    <SourcesList>\n      {visibleSources.map((source, idx) => (\n        <SourceLink \n          key={idx} \n          href={source.source} \n          target=\"_blank\" \n          rel=\"noopener noreferrer\"\n          title={source.title}\n        >\n          {source.title}\n        </SourceLink>\n      ))}\n      {sources.length > 3 && (\n        <ExtraButton onClick={() => setShowAll(!showAll)}>\n          {showAll ? \"Show less\" : `+ ${extraCount} more`}\n        </ExtraButton>\n      )}\n    </SourcesList>\n  );\n};\n\nconst Hero = ({ title, description, theme }: { title: string, description: string, theme: string }) => {\n  return (\n    <HeroContainer>\n      <HeroWrapper>\n        <RocketIcon color={theme === 'light' ? 'black' : 'white'} width={24} height={24} />\n        <HeroTitle>{title}</HeroTitle>\n        <HeroDescription>{description}</HeroDescription>\n      </HeroWrapper>\n    </HeroContainer>\n  );\n};\nexport const DocsGPTWidget = (props: WidgetProps) => {\n\n  const {\n    buttonIcon = 'https://d3dg1063dc54p9.cloudfront.net/widget/chat.svg',\n    buttonText = 'Ask a question',\n    buttonBg = 'linear-gradient(to bottom right, #5AF0EC, #E80D9D)',\n    defaultOpen = false,\n    ...coreProps\n  } = props\n\n  const [open, setOpen] = React.useState<boolean>(defaultOpen);\n  const [isAnimatingButton, setIsAnimatingButton] = React.useState(false);\n  const [isFloatingButtonVisible, setIsFloatingButtonVisible] = React.useState(true);\n\n  React.useEffect(() => {\n    if (isFloatingButtonVisible)\n      setTimeout(() => setIsAnimatingButton(true), 250);\n    return () => {\n      setIsAnimatingButton(false)\n    }\n  }, [isFloatingButtonVisible])\n\n  const handleClose = () => {\n    setIsFloatingButtonVisible(true);\n    setOpen(false);\n  };\n  const handleOpen = () => {\n    setOpen(true);\n    setIsFloatingButtonVisible(false);\n  }\n  return (\n    <>\n      <FloatingButton bgcolor={buttonBg} onClick={handleOpen} hidden={!isFloatingButtonVisible} isAnimatingButton={isAnimatingButton}>\n        <img width={24} src={buttonIcon} />\n        <span>{buttonText}</span>\n      </FloatingButton>\n      <WidgetCore isOpen={open} handleClose={handleClose} {...coreProps} />\n    </>\n  )\n}\n\nexport const WidgetCore = ({\n  apiHost = 'https://gptcloud.arc53.com',\n  apiKey = \"82962c9a-aa77-4152-94e5-a4f84fd44c6a\",\n  avatar = 'https://d3dg1063dc54p9.cloudfront.net/cute-docsgpt.png',\n  title = 'Get AI assistance',\n  description = 'DocsGPT\\'s AI Chatbot is here to help',\n  heroTitle = 'Welcome to DocsGPT !',\n  heroDescription = 'This chatbot is built with DocsGPT and utilises GenAI, please review important information using sources.',\n  size = 'small',\n  theme = 'dark',\n  collectFeedback = true,\n  isOpen = false,\n  showSources = true,\n  handleClose,\n  prefilledQuery = ''\n}: WidgetCoreProps) => {\n  const [prompt, setPrompt] = React.useState<string>(\"\");\n  const [mounted, setMounted] = React.useState(false);\n  const [status, setStatus] = React.useState<Status>('idle');\n  const [queries, setQueries] = React.useState<Query[]>([]);\n  const [conversationId, setConversationId] = React.useState<string | null>(null);\n  const [eventInterrupt, setEventInterrupt] = React.useState<boolean>(false); //click or scroll by user while autoScrolling\n  const [hasScrolledToLast, setHasScrolledToLast] = useState(true);\n\n  const isBubbleHovered = useRef<boolean>(false);\n  const conversationRef = useRef<HTMLDivElement | null>(null);\n  const endMessageRef = React.useRef<HTMLDivElement | null>(null);\n  const md = new MarkdownIt();\n\n  React.useEffect(() => {\n    if (isOpen) {\n      setMounted(true); // Mount the component\n      appendQuery(prefilledQuery)\n    } else {\n      // Wait for animations before unmounting\n      const timeout = setTimeout(() => {\n        setMounted(false)\n      }, 250);\n      return () => clearTimeout(timeout);\n    }\n  }, [isOpen]);\n\n  const handleUserInterrupt = () => {\n    if (!eventInterrupt && status === 'loading') setEventInterrupt(true);\n  }\n\n  const scrollIntoView = () => {\n    if (!conversationRef?.current || eventInterrupt) return;\n\n    if (status === 'idle' || !queries.length || !queries[queries.length - 1].response) {\n      conversationRef.current.scrollTo({\n        behavior: 'smooth',\n        top: conversationRef.current.scrollHeight,\n      });\n    } else {\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\n    }\n    setHasScrolledToLast(true);\n  };\n\n  const checkScroll = () => {\n    const el = conversationRef.current;\n    if (!el) return;\n    const isBottom = el.scrollHeight - el.scrollTop - el.clientHeight < 10;\n    setHasScrolledToLast(isBottom);\n  };\n\n  React.useEffect(() => {\n    !eventInterrupt && scrollIntoView();\n    \n    conversationRef.current?.addEventListener('scroll', checkScroll);\n    return () => {\n      conversationRef.current?.removeEventListener('scroll', checkScroll);\n    };\n  }, [queries.length, queries[queries.length - 1]?.response]);\n\n  async function handleFeedback(feedback: FEEDBACK, index: number) {\n    let query = queries[index];\n    if (!query.response || !conversationId) {\n      console.log(\"Cannot submit feedback: missing response or conversation ID\");\n      return;\n    }\n\n    // If clicking the same feedback button that's already active, remove the feedback by sending null\n    if (query.feedback === feedback) {\n      try {\n        const response = await sendFeedback({\n          question: query.prompt,\n          answer: query.response,\n          feedback: null,\n          apikey: apiKey,\n          conversation_id: conversationId,\n          question_index: index,\n        }, apiHost);\n\n        if (response.status === 200) {\n          const updatedQuery = { ...query };\n          delete updatedQuery.feedback;\n          setQueries((prev: Query[]) =>\n            prev.map((q, i) => (i === index ? updatedQuery : q))\n          );\n        }\n      } catch (err) {\n        console.error(\"Failed to submit feedback:\", err);\n      }\n      return;\n    }\n\n    try {\n      const response = await sendFeedback({\n        question: query.prompt,\n        answer: query.response,\n        feedback: feedback,\n        apikey: apiKey,\n        conversation_id: conversationId,\n        question_index: index,\n      }, apiHost);\n\n      if (response.status === 200) {\n        setQueries((prev: Query[]) => {\n          return prev.map((q, i) => {\n            if (i === index) {\n              return { ...q, feedback: feedback };\n            }\n            return q;\n          });\n        });\n      }\n    } catch (err) {\n      console.error(\"Failed to submit feedback:\", err);\n    }\n  }\n\n  async function stream(question: string) {\n    setStatus('loading')\n    try {\n      await fetchAnswerStreaming(\n        {\n          question: question,\n          apiKey: apiKey,\n          apiHost: apiHost,\n          history: queries,\n          conversationId: conversationId,\n          onEvent: (event: MessageEvent) => {\n            const data = JSON.parse(event.data);\n            // check if the 'end' event has been received\n            if (data.type === 'end') {\n              setStatus('idle');\n            }\n            else if (data.type === 'id') {\n              setConversationId(data.id)\n            }\n            else if (data.type === 'error') {\n              const updatedQueries = [...queries];\n              updatedQueries[updatedQueries.length - 1].error = data.error;\n              setQueries(updatedQueries);\n              setStatus('idle')\n            }\n            else if (data.type === 'source' && showSources) {\n              const updatedQueries = [...queries];\n              updatedQueries[updatedQueries.length - 1].sources = data.source;\n              setQueries(updatedQueries);\n            }\n            else {\n              const result = data.answer ? data.answer : ''; //Fallback to an empty string if data.answer is undefined\n              const streamingResponse = queries[queries.length - 1].response ? queries[queries.length - 1].response : '';\n              const updatedQueries = [...queries];\n              updatedQueries[updatedQueries.length - 1].response = streamingResponse + result;\n              setQueries(updatedQueries);\n            }\n          }\n        }\n      );\n    } catch (error) {\n      const updatedQueries = [...queries];\n      updatedQueries[updatedQueries.length - 1].error = 'Something went wrong !'\n      setQueries(updatedQueries);\n      setStatus('idle')\n      //setEventInterrupt(false)\n    }\n\n  }\n  // submit handler\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    await appendQuery(prompt)\n  }\n\n  const appendQuery = async (userQuery: string) => {\n    if (!userQuery)\n      return;\n\n    setEventInterrupt(false);\n    queries.push({ prompt: userQuery });\n    setPrompt('');\n    await stream(userQuery);\n  }\n  const handleImageError = (event: React.SyntheticEvent<HTMLImageElement, Event>) => {\n    event.currentTarget.src = \"https://d3dg1063dc54p9.cloudfront.net/cute-docsgpt.png\";\n  };\n\n  const dimensions =\n    typeof size === 'object' && 'custom' in size\n      ? sizesConfig.getCustom(size.custom)\n      : sizesConfig[size];\n  if (!mounted) return null;\n  return (\n    <ThemeProvider theme={{ ...themes[theme], dimensions }}>\n      {isOpen && size === 'large' &&\n        <Overlay onClick={handleClose} />\n      }\n      {(\n        <WidgetContainer className={`${size !== 'large' ? (isOpen ? \"open\" : \"close\") : \"modal\"}`} modal={size === 'large'}>\n          <StyledContainer isOpen={isOpen}>\n            <div>\n              <CancelButton onClick={handleClose}>\n                <Cross2Icon width={24} height={24} color={theme === 'light' ? 'black' : 'white'} />\n              </CancelButton>\n              <Header>\n                <img style={{ transform: 'translateY(-5px)', maxWidth: \"42px\", maxHeight: \"42px\" }} onError={handleImageError} src={avatar} alt='docs-gpt' />\n                <ContentWrapper>\n                  <Title>{title}</Title>\n                  <Description>{description}</Description>\n                </ContentWrapper>\n              </Header>\n            </div>\n            <Conversation \n              ref={conversationRef}\n              onWheel={handleUserInterrupt} \n              onTouchMove={handleUserInterrupt}\n            > \n              {\n                queries.length > 0 ? queries?.map((query, index) => {\n                  return (\n                    <React.Fragment key={index}>\n                      {\n                        query.prompt &&\n                        <MessageBubble type='QUESTION'>\n                          <Message\n                            type='QUESTION'\n                            ref={(!(query.response || query.error) && index === queries.length - 1) ? endMessageRef : null}>\n                            {query.prompt}\n                          </Message>\n                        </MessageBubble>\n                      }\n                      {\n                        query.response ? <MessageBubble onMouseOver={() => { isBubbleHovered.current = true }} type='ANSWER'>\n                          {showSources && query.sources && query.sources.length > 0 && query.sources.some(source => source.source !== 'local') && (\n                            <SourcesComponent sources={query.sources.filter(source => source.source !== 'local')} />\n                          )}\n                          <Message\n                            type='ANSWER'\n                            ref={(index === queries.length - 1) ? endMessageRef : null}\n                          >\n                            <Markdown\n                              dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(md.render(query.response)) }}\n                            />\n                          </Message>\n\n                          {collectFeedback &&\n                            <Feedback>\n                              <button\n                                style={{backgroundColor:'transparent', border:'none',cursor:'pointer'}}\n                                onClick={(e) => {\n                                e.stopPropagation()\n                                handleFeedback(\"LIKE\", index)}\n                                }>\n                              <Like\n                                style={{\n                                  stroke: query.feedback == 'LIKE' ? '#8860DB' : '#c0c0c0',\n                                  visibility: query.feedback == 'LIKE' ? 'visible' : 'hidden'\n                                }}\n                                fill='none'\n                                 />\n                              </button>\n                              <button\n                                style={{backgroundColor:'transparent', border:'none',cursor:'pointer'}}\n                                onClick={(e) => {\n                                e.stopPropagation()\n                                handleFeedback(\"DISLIKE\", index)}\n                                }>\n                              <Dislike\n                                style={{\n                                  stroke: query.feedback == 'DISLIKE' ? '#ed8085' : '#c0c0c0',\n                                  visibility: query.feedback == 'DISLIKE' ? 'visible' : 'hidden'\n                                }}\n                                fill='none'\n                                 />\n                              </button>\n                            </Feedback>}\n                        </MessageBubble>\n                          : <div>\n                            {\n                              query.error ? <ErrorAlert>\n\n                                <ExclamationTriangleIcon width={22} height={22} color='#b91c1c' />\n                                <div>\n                                  <h5 style={{ margin: 2 }}>Network Error</h5>\n                                  <span style={{ margin: 2, fontSize: '13px' }}>{query.error}</span>\n                                </div>\n                              </ErrorAlert>\n                                : <MessageBubble type='ANSWER'>\n                                  <Message type='ANSWER' style={{ fontWeight: 600 }}>\n                                    <DotAnimation>.</DotAnimation>\n                                    <Delay delay={200}>.</Delay>\n                                    <Delay delay={400}>.</Delay>\n                                  </Message>\n                                </MessageBubble>\n                            }\n                          </div>\n                      }\n                    </React.Fragment>)\n                })\n                  : <Hero title={heroTitle} description={heroDescription} theme={theme} />\n              }\n            </Conversation>\n            <div>\n              <PromptContainer\n                onSubmit={handleSubmit}>\n                <StyledInput\n                  autoFocus\n                  value={prompt} onChange={(event) => setPrompt(event.target.value)}\n                  type='text' placeholder=\"Ask your question\" />\n                <StyledButton\n                  disabled={prompt.trim().length == 0 || status !== 'idle'}>\n                  <PaperPlaneIcon width={18} height={18} color='white' />\n                </StyledButton>\n              </PromptContainer>\n              <Tagline>\n                Powered by&nbsp;\n                <Hyperlink target='_blank' href='https://www.docsgpt.cloud/'>DocsGPT</Hyperlink>\n              </Tagline>\n            </div>\n          </StyledContainer>\n        </WidgetContainer>\n      )\n      }\n    </ThemeProvider>\n  )\n}\n","import { FEEDBACK } from \"@/types\";\n\ninterface HistoryItem {\n  prompt: string;\n  response?: string;\n}\n\ninterface FetchAnswerStreamingProps {\n  question?: string;\n  apiKey?: string;\n  selectedDocs?: string;\n  history?: HistoryItem[];\n  conversationId?: string | null;\n  apiHost?: string;\n  onEvent?: (event: MessageEvent) => void;\n}\n\nexport interface FeedbackPayload {\n  question?: string;\n  answer?: string;\n  feedback: string | null;\n  apikey?: string;\n  conversation_id: string;\n  question_index: number;\n}\n\nexport function fetchAnswerStreaming({\n  question = '',\n  apiKey = '',\n  history = [],\n  conversationId = null,\n  apiHost = '',\n  onEvent = () => { console.log(\"Event triggered, but no handler provided.\"); }\n}: FetchAnswerStreamingProps): Promise<void> {\n  return new Promise<void>((resolve, reject) => {\n    const body = {\n      question: question,\n      history: JSON.stringify(history),\n      conversation_id: conversationId,\n      model: 'default',\n      api_key: apiKey\n    };\n    fetch(apiHost + '/stream', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    })\n      .then((response) => {\n        if (!response.body) throw Error('No response body');\n\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder('utf-8');\n        let counter = 0;\n        const processStream = ({\n          done,\n          value,\n        }: ReadableStreamReadResult<Uint8Array>) => {\n          if (done) {\n            resolve();\n            return;\n          }\n\n          counter += 1;\n\n          const chunk = decoder.decode(value);\n\n          const lines = chunk.split('\\n');\n\n          for (let line of lines) {\n            if (line.trim() == '') {\n              continue;\n            }\n            if (line.startsWith('data:')) {\n              line = line.substring(5);\n            }\n\n            const messageEvent = new MessageEvent('message', {\n              data: line,\n            });\n\n            onEvent(messageEvent); // handle each message\n          }\n\n          reader.read().then(processStream).catch(reject);\n        };\n\n        reader.read().then(processStream).catch(reject);\n      })\n      .catch((error) => {\n        console.error('Connection failed:', error);\n        reject(error);\n      });\n  });\n}\n\n\nexport  const sendFeedback = (payload: FeedbackPayload, apiHost: string): Promise<Response> => {\n  return fetch(`${apiHost}/api/feedback`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      question: payload.question,\n      answer: payload.answer,\n      feedback: payload.feedback,\n      api_key: payload.apikey,\n      conversation_id: payload.conversation_id,\n      question_index: payload.question_index\n    }),\n  });\n};\n","<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"current\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M9.39995 5.89997V3.09999C9.39995 2.54304 9.1787 2.0089 8.78487 1.61507C8.39105 1.22125 7.85691 1 7.29996 1L4.49998 7.29996V14.9999H12.3959C12.7336 15.0037 13.0612 14.8854 13.3185 14.6667C13.5757 14.448 13.7453 14.1437 13.7959 13.8099L14.7619 7.50996C14.7924 7.30931 14.7788 7.10444 14.7222 6.90954C14.6657 6.71464 14.5674 6.53437 14.4342 6.38123C14.301 6.22808 14.1362 6.10572 13.951 6.02262C13.7659 5.93952 13.5649 5.89767 13.3619 5.89997H9.39995ZM4.49998 14.9999H2.39999C2.02869 14.9999 1.6726 14.8524 1.41005 14.5899C1.1475 14.3273 1 13.9712 1 13.5999V8.69995C1 8.32865 1.1475 7.97256 1.41005 7.71001C1.6726 7.44746 2.02869 7.29996 2.39999 7.29996H4.49998\" fill=\"none\"/>\n<path d=\"M4.49998 7.29996L7.29996 1C7.85691 1 8.39105 1.22125 8.78487 1.61507C9.1787 2.0089 9.39995 2.54304 9.39995 3.09999V5.89997H13.3619C13.5649 5.89767 13.7659 5.93952 13.951 6.02262C14.1362 6.10572 14.301 6.22808 14.4342 6.38123C14.5674 6.53437 14.6657 6.71464 14.7223 6.90954C14.7788 7.10444 14.7924 7.30931 14.7619 7.50996L13.7959 13.8099C13.7453 14.1437 13.5757 14.448 13.3185 14.6667C13.0612 14.8854 12.7336 15.0037 12.3959 14.9999H4.49998M4.49998 7.29996V14.9999M4.49998 7.29996H2.39999C2.02869 7.29996 1.6726 7.44746 1.41005 7.71001C1.1475 7.97256 1 8.32865 1 8.69995V13.5999C1 13.9712 1.1475 14.3273 1.41005 14.5899C1.6726 14.8524 2.02869 14.9999 2.39999 14.9999H4.49998\" stroke=\"current\" stroke-width=\"1.39999\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n","<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"current\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M6.37776 10.1001V12.9C6.37776 13.457 6.599 13.9911 6.99282 14.3849C7.38664 14.7788 7.92077 15 8.47772 15L11.2777 8.70011V1.00025H3.38181C3.04419 0.996436 2.71656 1.11477 2.45929 1.33344C2.20203 1.55212 2.03246 1.8564 1.98184 2.19023L1.01585 8.49012C0.985398 8.69076 0.998931 8.89563 1.05551 9.09053C1.1121 9.28543 1.21038 9.46569 1.34355 9.61884C1.47671 9.77198 1.64159 9.89434 1.82674 9.97744C2.01189 10.0605 2.2129 10.1024 2.41583 10.1001H6.37776ZM11.2777 1.00025H13.1466C13.5428 0.993247 13.9277 1.13195 14.2284 1.39002C14.5291 1.64809 14.7245 2.00758 14.7776 2.40023V7.30014C14.7245 7.69279 14.5291 8.05227 14.2284 8.31035C13.9277 8.56842 13.5428 8.70712 13.1466 8.70011H11.2777\" fill=\"none\"/>\n<path d=\"M11.2777 8.70011L8.47772 15C7.92077 15 7.38664 14.7788 6.99282 14.3849C6.599 13.9911 6.37776 13.457 6.37776 12.9V10.1001H2.41583C2.2129 10.1024 2.01189 10.0605 1.82674 9.97744C1.64159 9.89434 1.47671 9.77198 1.34355 9.61884C1.21038 9.46569 1.1121 9.28543 1.05551 9.09053C0.998931 8.89563 0.985398 8.69076 1.01585 8.49012L1.98184 2.19023C2.03246 1.8564 2.20203 1.55212 2.45929 1.33344C2.71656 1.11477 3.04419 0.996436 3.38181 1.00025H11.2777M11.2777 8.70011V1.00025M11.2777 8.70011H13.1466C13.5428 8.70712 13.9277 8.56842 14.2284 8.31035C14.5291 8.05227 14.7245 7.69279 14.7776 7.30014V2.40023C14.7245 2.00758 14.5291 1.64809 14.2284 1.39002C13.9277 1.13195 13.5428 0.993247 13.1466 1.00025H11.2777\" stroke=\"current\" stroke-width=\"1.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n","import React from 'react';\nimport styled, { ThemeProvider, createGlobalStyle } from 'styled-components';\nimport { WidgetCore } from './DocsGPTWidget';\nimport { SearchBarProps } from '@/types';\nimport { getSearchResults } from '../requests/searchAPI';\nimport { Result } from '@/types';\nimport { getOS, processMarkdownString } from '../utils/helper';\nimport DOMPurify from 'dompurify';\nimport {\n    CodeIcon,\n    TextAlignLeftIcon,\n    HeadingIcon,\n    ReaderIcon,\n    ListBulletIcon,\n    QuoteIcon\n} from '@radix-ui/react-icons';\nconst themes = {\n    dark: {\n        name: 'dark',\n        bg: '#202124',\n        text: '#EDEDED',\n        primary: {\n            text: \"#FAFAFA\",\n            bg: '#111111'\n        },\n        secondary: {\n            text: \"#A1A1AA\",\n            bg: \"#38383b\"\n        }\n    },\n    light: {\n        name: 'light',\n        bg: '#EAEAEA',\n        text: '#171717',\n        primary: {\n            text: \"#222327\",\n            bg: \"#fff\"\n        },\n        secondary: {\n            text: \"#A1A1AA\",\n            bg: \"#F6F6F6\"\n        }\n    }\n}\n\nconst GlobalStyle = createGlobalStyle`\n  .highlight {\n    color: ${props => props.theme.name === 'dark' ? '#4B9EFF' : '#0066CC'};\n    font-weight: 500;\n  }\n`;\n\nconst loadGeistFont = () => {\n    const link = document.createElement('link');\n    link.href = 'https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap';\n    link.rel = 'stylesheet';\n    document.head.appendChild(link);\n};\n\nconst Main = styled.div`\n    all: initial;\n    font-family: 'Geist', sans-serif;\n`\nconst SearchButton = styled.button<{ inputWidth: string }>`\n    padding: 6px 6px;\n    font-family: inherit;\n    width: ${({ inputWidth }) => inputWidth};\n    border-radius: 8px;\n    display: inline;\n    color: ${props => props.theme.secondary.text};\n    outline: none;\n    border: none;\n    background-color: ${props => props.theme.secondary.bg};\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    transition: background-color 128ms linear;\n    text-align: left;\n    cursor: pointer;\n`\n\nconst Container = styled.div`\n    position: relative;\n    display: inline-block;\n`\nconst SearchOverlay = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #0000001A;\n    backdrop-filter: blur(8px);\n    -webkit-backdrop-filter: blur(8px);\n    z-index: 99;\n`;\n\n\nconst SearchResults = styled.div`\n    position: fixed;\n    display: flex;\n    flex-direction: column;\n    background-color: ${props => props.theme.name === 'dark' ? \n        'rgba(0, 0, 0, 0.15)' : \n        'rgba(255, 255, 255, 0.4)'};\n    border: 1px solid rgba(255, 255, 255, 0.18);\n    border-radius: 15px;\n    padding: 8px 0px 8px 0px;\n    width: 792px;\n    max-width: 90vw;\n    height: 396px;\n    z-index: 100;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    color: ${props => props.theme.primary.text};\n    \n    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);\n    backdrop-filter: blur(82px);\n    -webkit-backdrop-filter: blur(82px);\n    border-radius: 10px;\n    \n    box-sizing: border-box;\n\n    @media only screen and (max-width: 768px) {\n        height: 80vh;\n        width: 90vw;\n    }\n`;\n\nconst SearchResultsScroll = styled.div`\n    flex: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    scrollbar-gutter: stable;\n    scrollbar-width: thin;\n    scrollbar-color: #383838 transparent;\n    padding: 0 16px;\n`;\n\nconst IconTitleWrapper = styled.div`\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    .element-icon{\n        margin: 4px;\n    }\n`;\n\nconst Title = styled.h3`\n    font-size: 15px;\n    font-weight: 400;\n    color: ${props => props.theme.primary.text};\n    margin: 0;\n    overflow-wrap: break-word;\n    white-space: normal;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`;\nconst ContentWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    gap: 12px; \n`;\n\n\n\nconst ResultWrapper = styled.div`\n    display: flex;\n    align-items: flex-start;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 8px 16px;\n    cursor: pointer;\n    background-color: transparent;\n    font-family: 'Geist', sans-serif;\n    border-radius: 8px;\n\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    word-break: break-word;\n    white-space: normal;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    &:hover {\n        backdrop-filter: blur(8px);\n        -webkit-backdrop-filter: blur(8px);\n    }\n`;\n\nconst Content = styled.div`\n    display: flex;\n    margin-left: 8px;\n    flex-direction: column;\n    gap: 8px;\n    padding: 4px 0px 0px 12px;\n    font-size: 15px;\n    color: ${props => props.theme.primary.text};\n    line-height: 1.6;\n    border-left: 2px solid ${props => props.theme.primary.text}CC;\n    overflow: hidden;\n    \n`;\nconst ContentSegment = styled.div`\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    padding-right: 16px;\n    overflow-wrap: break-word;\n    white-space: normal;\n    overflow: hidden; \n    text-overflow: ellipsis;\n`\n\nconst Toolkit = styled.kbd`\n    position: absolute;\n    right: 4px;\n    top: 50%;\n    transform: translateY(-50%);\n    background-color: ${(props) => props.theme.primary.bg};\n    color: ${(props) => props.theme.secondary.text};\n    font-weight: 600;\n    font-size: 10px;\n    padding: 3px 6px;\n    border: 1px solid ${(props) => props.theme.secondary.text};\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1;\n    pointer-events: none;\n`\nconst Loader = styled.div`\n  margin: 2rem auto;\n  border: 4px solid ${props => props.theme.name === 'dark' ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)'};\n  border-top: 4px solid ${props => props.theme.name === 'dark' ? '#FFFFFF' : props.theme.primary.bg};\n  border-radius: 50%;\n  width: 12px;\n  height: 12px;\n  animation: spin 1s linear infinite;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\nconst NoResults = styled.div`\n  margin-top: 2rem;\n  text-align: center;\n  font-size: 14px;\n  color: ${props => props.theme.name === 'dark' ? '#E0E0E0' : '#505050'};\n  font-weight: 500;\n`;\nconst AskAIButton = styled.button`\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 12px;\n    width: calc(100% - 32px);\n    margin: 0 16px 16px 16px;\n    box-sizing: border-box;\n    height: 50px;\n    padding: 8px 24px;\n    border: none;\n    border-radius: 8px;\n    color: ${props => props.theme.text}; \n    cursor: pointer;\n    font-size: 16px;\n    backdrop-filter: blur(16px);\n    -webkit-backdrop-filter: blur(16px);\n    background-color: ${props => props.theme.name === 'dark' ? \n        'rgba(255, 255, 255, 0.05)' : \n        'rgba(0, 0, 0, 0.03)'};\n\n    &:hover {\n        backdrop-filter: blur(20px);\n        -webkit-backdrop-filter: blur(20px);\n        background-color: ${props => props.theme.name === 'dark' ? \n            'rgba(255, 255, 255, 0.1)' : \n            'rgba(0, 0, 0, 0.06)'}; \n    }\n`;\n\nconst SearchHeader = styled.div`\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 12px;\n    padding-bottom: 12px;\n    border-bottom: 1px solid ${props => props.theme.name === 'dark' ? '#FFFFFF24' : 'rgba(0, 0, 0, 0.14)'};\n`;\n\n\n\nconst TextField = styled.input`\n    width: calc(100% - 32px);\n    margin: 0 16px;\n    padding: 12px 16px;\n    border: none;\n    background-color: transparent;\n    color: ${props => props.theme.text}; \n    font-size: 20px;\n    font-weight: 400; \n    outline: none;\n    \n    &:focus {\n        border-color: none;\n    }\n\n    &::placeholder {\n        color: ${props => props.theme.name === 'dark' ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.5)'} !important;\n        opacity: 100%; /* Force opacity to ensure placeholder is visible */\n        font-weight: 500;\n    }\n`\n\n\n\nconst EscapeInstruction = styled.kbd`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 12px 16px 0;\n    padding: 4px 8px;\n    border-radius: 4px;\n    background-color: transparent;\n    border: 1px solid ${props => props.theme.name === 'dark' ? \n        'rgba(237, 237, 237, 0.6)' : \n        'rgba(23, 23, 23, 0.6)'};\n    color: ${props => props.theme.name === 'dark' ? '#EDEDED' : '#171717'};\n    font-size: 12px;\n    font-family: 'Geist', sans-serif;\n    white-space: nowrap;\n    cursor: pointer;\n    width: fit-content;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n`;\n\n\nexport const SearchBar = ({\n    apiKey = \"74039c6d-bff7-44ce-ae55-2973cbf13837\",\n    apiHost = \"https://gptcloud.arc53.com\",\n    theme = \"dark\",\n    placeholder = \"Search or Ask AI...\",\n    width = \"256px\",\n    buttonText = \"Search here\"\n}: SearchBarProps) => {\n    const [input, setInput] = React.useState<string>(\"\");\n    const [loading, setLoading] = React.useState<boolean>(false);\n    const [isWidgetOpen, setIsWidgetOpen] = React.useState<boolean>(false);\n    const inputRef = React.useRef<HTMLInputElement>(null);\n    const containerRef = React.useRef<HTMLInputElement>(null);\n    const [isResultVisible, setIsResultVisible] = React.useState<boolean>(false);\n    const [results, setResults] = React.useState<Result[]>([]);\n    const debounceTimeout = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n    const abortControllerRef = React.useRef<AbortController | null>(null);\n    const browserOS = getOS();\n    const isTouch = 'ontouchstart' in window;\n\n    const getKeyboardInstruction = () => {\n        if (isResultVisible) return \"Enter\";\n        return browserOS === 'mac' ? ' + K' : 'Ctrl + K';\n    };\n\n    React.useEffect(() => {\n        loadGeistFont()\n        const handleClickOutside = (event: MouseEvent) => {\n            if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n                setIsResultVisible(false);\n            }\n        };\n\n        const handleKeyDown = (event: KeyboardEvent) => {\n            if (\n                ((browserOS === 'win' || browserOS === 'linux') && event.ctrlKey && event.key === 'k') ||\n                (browserOS === 'mac' && event.metaKey && event.key === 'k')\n            ) {\n                event.preventDefault();\n                inputRef.current?.focus();\n                setIsResultVisible(true);\n            } else if (event.key === 'Escape') {\n                setIsResultVisible(false);\n            }\n        };\n\n\n        document.addEventListener('mousedown', handleClickOutside);\n        document.addEventListener('keydown', handleKeyDown);\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n\n    React.useEffect(() => {\n    if (!input) {\n        setResults([]);\n        setLoading(false);\n        return;\n    }\n    setLoading(true);\n    if (debounceTimeout.current) {\n        clearTimeout(debounceTimeout.current);\n    }\n\n    if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n    }\n    const abortController = new AbortController();\n    abortControllerRef.current = abortController;\n\n    debounceTimeout.current = setTimeout(() => {\n        getSearchResults(input, apiKey, apiHost, abortController.signal)\n            .then((data) => setResults(data))\n            .catch((err) => !abortController.signal.aborted && console.log(err))\n            .finally(() => setLoading(false));\n    }, 500);\n\n    return () => {\n        abortController.abort();\n        clearTimeout(debounceTimeout.current ?? undefined);\n    };\n}, [input])\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            openWidget();\n        }\n    };\n\n    const openWidget = () => {\n        setIsWidgetOpen(true);\n        setIsResultVisible(false);\n    };\n\n    const handleClose = () => {\n        setIsWidgetOpen(false);\n        setIsResultVisible(true);\n    };\n\n    return (\n        <ThemeProvider theme={{ ...themes[theme] }}>\n            <Main>\n                <GlobalStyle />\n                <Container ref={containerRef}>\n                    <SearchButton\n                        onClick={() => setIsResultVisible(true)}\n                        inputWidth={width}\n                    >\n                        {buttonText}\n                    </SearchButton>\n                    {\n                        isResultVisible && (\n                            <>\n                            <SearchOverlay onClick={() => setIsResultVisible(false)} />\n                            <SearchResults>\n                                <SearchHeader>\n                                    <TextField\n                                        ref={inputRef}\n                                        value={input}\n                                        onChange={(e) => setInput(e.target.value)}\n                                        onKeyDown={(e) => handleKeyDown(e)}\n                                        placeholder={placeholder}\n                                        autoFocus\n                                    />\n                                    <EscapeInstruction onClick={() => setIsResultVisible(false)}>\n                                        Esc\n                                    </EscapeInstruction>\n                                </SearchHeader>\n                                <AskAIButton onClick={openWidget}>\n                                    <img\n                                        src=\"https://d3dg1063dc54p9.cloudfront.net/cute-docsgpt.png\"\n                                        alt=\"DocsGPT\"\n                                        width={24}\n                                        height={24}\n                                    />\n                                    <span>Ask the AI</span>\n                                </AskAIButton>\n                                <SearchResultsScroll>\n                                    {!loading ? (\n                                        results.length > 0 ? (\n                                            results.map((res, key) => {\n                                                const containsSource = res.source !== 'local';\n                                                const processedResults = processMarkdownString(res.text, input);\n                                                if (processedResults)\n                                                    return (\n                                                        <ResultWrapper\n                                                            key={key}\n                                                            onClick={() => {\n                                                                if (!containsSource) return;\n                                                                window.open(res.source, '_blank', 'noopener, noreferrer');\n                                                            }}\n                                                        >\n                                                            <div style={{ flex: 1 }}>\n                                                                <ContentWrapper>\n                                                                    <IconTitleWrapper>\n                                                                        <ReaderIcon className=\"title-icon\" />\n                                                                        <Title>{res.title}</Title>\n                                                                    </IconTitleWrapper>\n                                                                    <Content>\n                                                                        {processedResults.map((element, index) => (\n                                                                            <ContentSegment key={index}>\n                                                                                <IconTitleWrapper>\n                                                                                    {element.tag === 'code' && <CodeIcon className=\"element-icon\" />}\n                                                                                    {(element.tag === 'bulletList' || element.tag === 'numberedList') && <ListBulletIcon className=\"element-icon\" />}\n                                                                                    {element.tag === 'text' && <TextAlignLeftIcon className=\"element-icon\" />}\n                                                                                    {element.tag === 'heading' && <HeadingIcon className=\"element-icon\" />}\n                                                                                    {element.tag === 'blockquote' && <QuoteIcon className=\"element-icon\" />}\n                                                                                </IconTitleWrapper>\n                                                                                <div\n                                                                                    style={{ flex: 1 }}\n                                                                                    dangerouslySetInnerHTML={{\n                                                                                        __html: DOMPurify.sanitize(element.content),\n                                                                                    }}\n                                                                                />\n                                                                            </ContentSegment>\n                                                                        ))}\n                                                                    </Content>\n                                                                </ContentWrapper>\n                                                            </div>\n                                                        </ResultWrapper>\n                                                    );\n                                                return null;\n                                            })\n                                        ) : (\n                                            <NoResults>No results found</NoResults>\n                                        )\n                                    ) : (\n                                        <Loader />\n                                    )}\n                                </SearchResultsScroll>\n                            </SearchResults>\n                            </>\n                        )\n                    }\n                    {\n                        isTouch ?\n\n                            <Toolkit\n                                onClick={() => {\n                                    setIsWidgetOpen(true)\n                                }}\n                                title={\"Tap to Ask the AI\"}>\n                                Tap\n                            </Toolkit>\n                            :\n                            <Toolkit\n                                title={getKeyboardInstruction() === \"Enter\" ? \"Press Enter to Ask AI\" : \"\"}>\n                                {getKeyboardInstruction()}\n                            </Toolkit>\n                    }\n                </Container>\n                <WidgetCore\n                    theme={theme}\n                    apiHost={apiHost}\n                    apiKey={apiKey}\n                    prefilledQuery={input}\n                    isOpen={isWidgetOpen}\n                    handleClose={handleClose} size={\"large\"}\n                />\n            </Main>\n        </ThemeProvider>\n    )\n}\n","import { Result } from \"@/types\";\n\nasync function getSearchResults(question: string, apiKey: string, apiHost: string, signal: AbortSignal): Promise<Result[]> {\n\n  const payload = {\n    question,\n    api_key: apiKey\n  };\n\n  try {\n    const response = await fetch(`${apiHost}/api/search`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(payload),\n      signal: signal\n    });\n\n    if (!response.ok) {\n      throw new Error(`Error: ${response.status}`);\n    }\n\n    const data: Result[] = await response.json();\n    return data;\n\n  } catch (error) {\n    if (!(error instanceof DOMException && error.name == \"AbortError\")) {\n      console.error(\"Failed to fetch documents:\", error);\n    }\n    throw error;\n  }\n}\n\nexport {\n  getSearchResults\n}","export const getOS = () => {\n  const platform = window.navigator.platform;\n  const userAgent = window.navigator.userAgent || window.navigator.vendor;\n\n  if (/Mac/i.test(platform)) {\n    return 'mac';\n  }\n\n  if (/Win/i.test(platform)) {\n    return 'win';\n  }\n\n  if (/Linux/i.test(platform) && !/Android/i.test(userAgent)) {\n    return 'linux';\n  }\n\n  if (/Android/i.test(userAgent)) {\n    return 'android';\n  }\n\n  if (/iPhone|iPad|iPod/i.test(userAgent)) {\n    return 'ios';\n  }\n\n  return 'other';\n};\n\ninterface ParsedElement {\n  content: string;\n  tag: string;\n}\n\nexport const processMarkdownString = (markdown: string, keyword?: string): ParsedElement[] => {\n  const lines = markdown.trim().split('\\n');\n  const keywordLower = keyword?.toLowerCase();\n\n  const escapeRegExp = (str: string) => str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  const escapedKeyword = keyword ? escapeRegExp(keyword) : '';\n  const keywordRegex = keyword ? new RegExp(`(${escapedKeyword})`, 'gi') : null;\n\n  let isInCodeBlock = false;\n  let codeBlockContent: string[] = [];\n  let matchingLines: ParsedElement[] = [];\n  let firstLine: ParsedElement | null = null;\n\n  for (let i = 0; i < lines.length; i++) {\n    const trimmedLine = lines[i].trim();\n    if (!trimmedLine) continue;\n\n    if (trimmedLine.startsWith('```')) {\n      if (!isInCodeBlock) {\n        isInCodeBlock = true;\n        codeBlockContent = [];\n      } else {\n        isInCodeBlock = false;\n        const codeContent = codeBlockContent.join('\\n');\n        const parsedElement: ParsedElement = {\n          content: codeContent,\n          tag: 'code'\n        };\n\n        if (!firstLine) {\n          firstLine = parsedElement;\n        }\n\n        if (keywordLower && codeContent.toLowerCase().includes(keywordLower)) {\n          parsedElement.content = parsedElement.content.replace(keywordRegex!, '<span class=\"highlight\">$1</span>');\n          matchingLines.push(parsedElement);\n        }\n      }\n      continue;\n    }\n\n    if (isInCodeBlock) {\n      codeBlockContent.push(trimmedLine);\n      continue;\n    }\n\n    let parsedElement: ParsedElement | null = null;\n\n    const headingMatch = trimmedLine.match(/^(#{1,6})\\s+(.+)$/);\n    const bulletMatch = trimmedLine.match(/^[-*]\\s+(.+)$/);\n    const numberedMatch = trimmedLine.match(/^\\d+\\.\\s+(.+)$/);\n    const blockquoteMatch = trimmedLine.match(/^>+\\s*(.+)$/);\n\n    let content = trimmedLine;\n\n    if (headingMatch) {\n      content = headingMatch[2];\n      parsedElement = {\n        content: content,\n        tag: 'heading'\n      };\n    } else if (bulletMatch) {\n      content = bulletMatch[1];\n      parsedElement = {\n        content: content,\n        tag: 'bulletList'\n      };\n    } else if (numberedMatch) {\n      content = numberedMatch[1];\n      parsedElement = {\n        content: content,\n        tag: 'numberedList'\n      };\n    } else if (blockquoteMatch) {\n      content = blockquoteMatch[1];\n      parsedElement = {\n        content: content,\n        tag: 'blockquote'\n      };\n    } else {\n      parsedElement = {\n        content: content,\n        tag: 'text'\n      };\n    }\n\n    if (!firstLine) {\n      firstLine = parsedElement;\n    }\n\n    if (keywordLower && parsedElement.content.toLowerCase().includes(keywordLower)) {\n      parsedElement.content = parsedElement.content.replace(keywordRegex!, '<span class=\"highlight\">$1</span>');\n      matchingLines.push(parsedElement);\n    }\n  }\n\n  if (isInCodeBlock && codeBlockContent.length > 0) {\n    const codeContent = codeBlockContent.join('\\n');\n    const parsedElement: ParsedElement = {\n      content: codeContent,\n      tag: 'code'\n    };\n\n    if (!firstLine) {\n      firstLine = parsedElement;\n    }\n\n    if (keywordLower && codeContent.toLowerCase().includes(keywordLower)) {\n      parsedElement.content = parsedElement.content.replace(keywordRegex!, '<span class=\"highlight\">$1</span>');\n      matchingLines.push(parsedElement);\n    }\n  }\n\n  if (keywordLower && matchingLines.length > 0) {\n    return matchingLines;\n  }\n\n  return firstLine ? [firstLine] : [];\n};\n"],"names":["React","SvgLike","props","SvgDislike"],"version":3,"file":"main.js.map"}